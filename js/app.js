"use strict";var dialogCtrls,resolvables;resolvables={},dialogCtrls={};var onGoogleReady;angular.module("config",[]),angular.module("fork",[]),angular.module("account",[]),angular.module("admin",[]),angular.module("dashboard",["ui.map"]),angular.module("pages",[]),angular.module("platform",[]),angular.module("common",["ui.route","ui.event","ui.map","config","fork","ngCookies","restangular","ui.bootstrap","ui.select2"]),angular.module("app",["config","common","dashboard","admin","account","pages","platform"]),onGoogleReady=function(){return angular.element(document).ready(function(){return angular.bootstrap(document,["app"])})},angular.module("account").config(["$routeProvider","WardenProvider",function(e,r){return r.simplify(e).set_template_prefix("views/account").omit_controller().when("login").when("register.member").when("register.member.with_event",{omitController:!1}).when("register.vendor").when("forgot_password").when("reset_password/:userId/:token").when("account.email_confirmation/:userId/:token",{omitView:!0,omitController:!1})}]),angular.module("account").controller("AccountEmailConfirmationCtrl",["$scope","$routeParams","Auth","User",function(e,r,t,o){return o.activate_with_token(r.userId,r.token).then(function(r){return e.notify_success("Your email has been verified"),t.create_session({user_type:r.user_type,auth_id:r.auth_id,auth_provider:r.auth_provider,token:r.token})},function(){return e.notify_error("We are unable to activate this account.")}),e.$on("session:created",function(r,t){return e.attemptLogin().then(function(){return e.redirect_to("dashboard."+t.user_type.toLowerCase()+".profile",{success:"Please proceed to furnish your account information"})},function(){return e.notify_error("Unable to log you in")})})}]),angular.module("dashboard").controller("RegisterMemberWithEventCtrl",["$scope","Cart","FormHandler","$cookieStore","Event",function(e,r,t,o,n){var i;return e.remove=function(e,t){return r.remove(e,t)},e.lengthOfHash=function(e){return Object.keys(e).length-1},e.saveForm=function(){var r;return e.submitted=!0,e.form.$valid?(e.clear_notifications(),r=e.form_object.password,delete e.form_object.password,o.put("register_with_event_form",e.form_object),e.form_object.password=r,e.notify_success("Your event details are now saved.")):t.validate(e.form.$error)},e.submitForm=function(){var r,o;return e.submitted=!0,e.terms_and_conditions?e.form.$valid?(e.clear_notifications(),r=n.submit_event_form_and_register(e.form_object),o="Your request has been submitted.",r.then(function(){return e.redirect_to("An email with further instruction will be sent to you shortly.",{success:o})},function(){return e.notify_error("Form has missing or invalid values")})):t.validate(e.form.$error):e.notify_info("Please check that you have read the terms and conditions")},i=function(){return t.formify(e),e.form_object=o.get("register_with_event_form")||o.get("event_form")||{},e.form_object.cart=r.get(),angular.isUndefined(e.form_object.questions)?e.form_object.questions={}:void 0},i()}]),dialogCtrls.forgotPassword=["$scope","dialog",function(e,r){return e.close=function(e){return r.close(e)}}],dialogCtrls.login=["$scope","dialog","$dialog","$timeout",function(e,r,t,o){return e.close=function(e){return r.close(e)},e.openRegisterDialog=function(){return r.close(),o(function(){return t.dialog({controller:dialogCtrls.register}).open("dialogs/account.register.html")},500)},e.openForgotPasswordDialog=function(){return r.close(),o(function(){return t.dialog({controller:dialogCtrls.forgotPassword}).open("dialogs/account.forgot_password.html")},500)}}],dialogCtrls.register=["$scope","dialog",function(e,r){return e.close=function(e){return r.close(e)}}],angular.module("account").run(["$rootScope","Auth","$q","SiteName","$cookieStore",function(e,r,t,o,n){return e.logout=function(){return r.logout(),e.$broadcast("logged_out"),e.redirect_to("",{success:"You are logged out"})},e.attemptLogin=function(o){var n,i;return null==o&&(o={}),i=t.defer(),null!=e.authenticated&&e.authenticated?i.resolve(e.current_user):(n=r.user({delegate:!0}),n.then(function(r){return e.current_user=r,e.authenticated=!0,e.user_class=r.user_type,e.user_type=r.user_type.toLowerCase(),"function"==typeof o.successHandler&&o.successHandler(r),i.resolve(r)},function(){return e.current_user=null,e.authenticated=!1,e.user_class="User",e.user_type="guest","function"==typeof o.failedHandler&&o.failedHandler(user),i.reject("user is not logged in")})),i.promise},angular.forEach(["logged_out","login:started"],function(r){return e.$on(r,function(){return e.current_user=null,e.authenticated=!1,e.user_class="User",e.user_type="guest"})}),e.$on("authenticate:success",function(r,t){return e.attemptLogin({successHandler:function(r){var i;return i=t.register?"Welcome to "+o+"!":"You are logged in!",n.get("event_form")?e.redirect_to("event.new",{success:"Welcome to "+o+", you can now submit your event!"}):e.redirect_to("dashboard."+r.user_type.toLowerCase()+".profile",{success:i})}})}),e.attemptLogin()}]),angular.module("account").directive("forgotPasswordForm",[function(){return{restrict:"EA",replace:!0,scope:{},templateUrl:"forms/account/forgot_password.form.html",controller:["$scope","$rootScope","$routeParams","Auth",function(e,r,t,o){var n;return e.hasError=function(r){return!r.$valid&&(r.$dirty||e.submitted)},e.submitForm=function(){return e.submitted=!0,e.form.$valid?(r.clear_notifications(),o.forgot_password("Member",e.email,"local")):r.notify_error("Please enter a valid email")},n=function(){return e.submitted=!1},n()}]}}]),angular.module("account").directive("loginForm",[function(){return{restrict:"EA",replace:!0,scope:{},templateUrl:"forms/account/login.form.html",controller:["$scope","$rootScope","$routeParams","Auth",function(e,r,t,o){var n;return e.hasError=function(r){return!r.$valid&&(r.$dirty||e.submitted)},e.loginAsMember=function(){return e.submitted=!0,e.form.$valid?(r.clear_notifications(),o.authenticate("Member",e.user.email,"local",e.user.password)):void 0},e.loginAsVendor=function(){return e.submitted=!0,e.form.$valid?(r.clear_notifications(),o.authenticate("Vendor",e.user.email,"local",e.user.password)):void 0},n=function(){return e.submitted=!1},n()}]}}]),angular.module("account").directive("registerMemberForm",[function(){return{restrict:"EA",replace:!0,scope:{},templateUrl:"forms/account/register.member.form.html",controller:["$scope","$rootScope","$routeParams","Auth","FormHandler",function(e,r,t,o,n){var i;return e.hasError=function(r){return!r.$valid&&(r.$dirty||e.submitted)},e.submitForm=function(){var t;return e.submitted=!0,e.form.$valid?(r.clear_notifications(),t={first_name:e.user.first_name,last_name:e.user.last_name,reached_by:e.user.reached_by},o.register("Member",e.user.email,"local",e.user.email,e.user.password,t)):n.validate(e.form.$error)},i=function(){return e.submitted=!1},i()}]}}]),angular.module("account").directive("registerVendorForm",[function(){return{restrict:"EA",replace:!0,scope:{},templateUrl:"forms/account/register.vendor.form.html",controller:["$scope","$rootScope","$routeParams","Service","FormHandler","Auth",function(e,r,t,o,n,i){var a;return e.submitForm=function(){var t,o;return e.terms_and_conditions?(e.submitted=!0,e.form.$valid?(r.clear_notifications(),t={first_name:e.user.vendor.first_name,last_name:e.user.vendor.last_name,mobile:e.user.vendor.mobile,phone:e.user.vendor.phone,role:e.user.vendor.role,mailing_address:e.user.vendor.mailing_address,acra_no:e.user.vendor.acra_no,questions:e.user.vendor.questions},o={name:e.user.provider.name,address:e.user.provider.address,map_address:e.user.provider.map_address,browse_description:e.user.provider.browse_description,profile_description:e.user.provider.profile_description,provider_pictures:e.user.provider.provider_pictures},o.service_ids=[],angular.forEach(e.user.provider.checked_services,function(e,r){return e?o.service_ids.push(r):void 0}),i.register_vendor(e.user.vendor.email,"local",e.user.vendor.email,e.user.vendor.password,t,o)):n.validate(e.form.$error)):r.notify_error("Please check that you have read the terms and conditions")},a=function(){return n.formify(e),e.user={vendor:{},provider:{provider_pictures:[]}},n.handleImage(e,"provider_picture",e.user.provider.provider_pictures),e.user.provider.checked_services={},e.services=o.all({order:"created_at ASC"}),e.mapOptions={center:new google.maps.LatLng(1.3667,103.8),zoom:12,mapTypeId:google.maps.MapTypeId.ROADMAP,streetViewControl:!1,overviewMapControl:!1,panControl:!1,mapTypeControl:!1},e.setLocationMarker=function(r,t){return e.form_object.map_lat=t[0].latLng.lat(),e.form_object.map_lng=t[0].latLng.lng(),angular.isUndefined(e.locationMarker)?e.locationMarker=new google.maps.Marker({map:e.locationMap,position:t[0].latLng}):e.locationMarker.setPosition(t[0].latLng)}},a()}]}}]);var __hasProp={}.hasOwnProperty,__extends=function(e,r){function t(){this.constructor=e}for(var o in r)__hasProp.call(r,o)&&(e[o]=r[o]);return t.prototype=r.prototype,e.prototype=new t,e.__super__=r.prototype,e};angular.module("account").factory("Member",["Restangular","$rootScope","$filter",function(e,r,t){var o,n;return o=function(e){function r(){return n=r.__super__.constructor.apply(this,arguments)}return __extends(r,e),r}(BaseModel),new o(e,r,t,"member","members")}]);var __hasProp={}.hasOwnProperty,__extends=function(e,r){function t(){this.constructor=e}for(var o in r)__hasProp.call(r,o)&&(e[o]=r[o]);return t.prototype=r.prototype,e.prototype=new t,e.__super__=r.prototype,e};angular.module("account").factory("User",["Restangular","$rootScope","$filter",function(e,r,t){var o,n;return o=function(r){function t(){return n=t.__super__.constructor.apply(this,arguments)}return __extends(t,r),t.prototype.get_from_account=function(r,t,o){return this.before_operation({user_type:r,auth_id:t,auth_provider:o}),e.all("users").customGET("get_from_account",{user_type:r,auth_id:t,auth_provider:o})},t.prototype.authenticate_with_token=function(r){return this.before_operation({session:r}),e.all("users").customGET("authenticate_with_token",r)},t.prototype.register=function(r,t,o,n,i,a){var u;return u={user_type:r,auth_id:t,auth_provider:o,email:n,password:i,additional_fields:a},this.before_operation(u),e.all("users").customPOST("register",{},{},u)},t.prototype.authenticate=function(r,t,o,n){var i;return i={user_type:r,auth_id:t,auth_provider:o,password:n},this.before_operation(i),e.all("users").customGET("authenticate",i)},t.prototype.activate_with_token=function(r,t){var o;return o={token:t},this.before_operation(o),e.one("users",r).customGET("activate_with_token",o)},t.prototype.forgot_password=function(r,t,o){var n;return n={user_type:r,auth_id:t,auth_provider:o},this.before_operation(n),e.all("users").customPOST("forgot_password",{},{},n)},t.prototype.reset_password_with_token=function(r,t,o){var n;return n={token:t,new_password:o},console.log(n),this.before_operation(n),e.one("users",r).customPOST("reset_password_with_token",{},{},n)},t.prototype.clear_notifications=function(r){return e.one("users",r).customPOST("clear_notifications",{},{})},t}(BaseModel),new o(e,r,t,"user","users")}]),resolvables.current_user=["Auth","$q","$rootScope",function(e,r,t){var o;return o=e.user({delegate:!0}),o.then(function(e){return t.current_user=e,t.authenticated=!0,t.user_class=e.user_type,t.user_type=e.user_type.toLowerCase(),e},function(){return t.current_user=null,t.authenticated=!1,t.user_class="User",t.user_type="guest",t.notify_error("Please login first",!1),r.reject("Access not allowed")})}],angular.module("account").service("Auth",["$rootScope","$http","ErrorProcessor","Session","User","Provider","$q",function(e,r,t,o,n,i,a){return this.create_session=function(t){return o.set(t.user_type,t.auth_id,t.auth_provider,t.token),r.defaults.headers.common["User-Authorization"]=o.as_json(),console.log(t),e.$broadcast("session:created",t)},this.user=function(e){var r;return null==e&&(e={}),o.isEmpty()?a.reject("Session does not exist"):(r=this.authenticate_with_token(o.attributes()),null!=e.delegate&&e.delegate?r:r.then(function(e){return e},function(e){return t.process_login(e)}))},this.register=function(r,o,i,a,u,s){var c=this;return n.register(r,o,i,a,u,s).then(function(t){return t.email_confirmation?e.redirect_to("/",{info:"An email has been sent to verify your email address."}):c.authenticate(r,o,i,u,!0)},function(e){return console.log(e),t.process_registration(e)})},this.register_vendor=function(r,o,a,u,s,c){var l=this;return n.register("Vendor",r,o,a,u,s).then(function(t){return c.vendor_id=t.user.id,i.create(c),t.email_confirmation?e.redirect_to("/",{info:"An email has been sent to verify your email address."}):l.authenticate("Vendor",r,o,u,!0)},function(e){return console.log(e),t.process_registration(e)})},this.authenticate=function(r,i,a,u,s,c){var l=this;return null==u&&(u=null),null==s&&(s=!1),null==c&&(c={}),o.destroy(),e.$broadcast("login:started"),n.authenticate(r,i,a,u).then(function(r){return l.create_session(r),e.$broadcast("authenticate:success",{authenticated:r,register:s}),"function"==typeof c.successHandler?c.successHandler(r):void 0},function(e){return t.process_login(e),"function"==typeof c.errorHandler?c.errorHandler(e):void 0})},this.authenticate_with_token=function(e){return n.authenticate_with_token(e)},this.logout=function(){return o.destroy()},this.forgot_password=function(r,o,i,a){return null==a&&(a={}),n.forgot_password(r,o,i).then(function(r){return e.notify_success("An email has been sent to you to reset your password"),"function"==typeof a.successHandler?a.successHandler(r):void 0},function(e){return console.log(e),t.process_forgot_password(e),"function"==typeof a.errorHandler?a.errorHandler(e):void 0})},this}]),angular.module("account").factory("CustomProvider",["Auth","User","$rootScope","MemoryStore","$timeout",function(e,r,t,o,n){var i;return i=function(){function e(){}var i,a,u,s;return a=function(){return t.notify_error("You need to authorize this app in order to log in")},i=function(e){return n(function(){var n;return n=r.get_from_account(e.user_class,e.auth_id,e.auth_provider),n.then(function(){return o.set("auth_info",e),t.redirect_to(""+e.user_type+".login.custom_provider")},function(){return o.set("auth_info",e),t.redirect_to(""+e.user_type+".register.custom_provider")})},100)},u=function(e,r,t){return e.authResponse?FB.api("/me",function(e){var o;return i({user_class:r,user_type:t,auth_id:e.id,auth_provider:"facebook",email:e.email,additional_fields:{first_name:e.first_name,last_name:e.last_name,location:null!=(o=e.location)?o.name:void 0,photo_url:"http://graph.facebook.com/"+e.id+"/picture"}})}):a()},s=function(e,r){return IN.API.Profile("me").fields("id","email-address","first-name","last-name","location","summary","specialties","positions","picture-url","public-profile-url","skills","certifications","educations","date-of-birth","three-current-positions").result(function(t){var o,n,a,u,s,c,l,d;return o={user_class:e,user_type:r,auth_id:t.values[0].emailAddress,auth_provider:"linkedin",email:t.values[0].emailAddress,additional_fields:{first_name:t.values[0].firstName,last_name:t.values[0].lastName,photo_url:t.values[0].pictureUrl,location:null!=(n=t.values[0].location)?n.name:void 0}},"freelancer"===r&&(o.additional_fields.job_title=null!=(a=t.values[0].threeCurrentPositions)?null!=(u=a.values)?null!=(s=u[0])?s.title:void 0:void 0:void 0,o.additional_fields.professional_history=null!=(c=t.values[0].threeCurrentPositions)?null!=(l=c.values)?null!=(d=l[0])?d.summary:void 0:void 0:void 0,o.additional_fields.other_information=t.values[0].summary),IN.API.Raw("/people/~/picture-urls::(original)").result(function(e){return o.additional_fields.photo_url=e.values[0]}),i(o)})},e.prototype.connect=function(e,r,o){return t.start_ajax(),n(function(){var t;switch(e){case"facebook":return FB.login(function(e){return u(e,r,o)},{scope:"email, user_about_me, user_location, publish_actions"});case"linkedin":return(null!=(t=IN.User)?t.isAuthorized():void 0)?s(r,o):(IN.User.authorize(),IN.Event.on(IN,"auth",function(){return s(r,o)}))}},100)},e}(),new i}]),angular.module("account").factory("Session",["$cookieStore",function(e){var r;return r=function(){function r(){this._init()}return r.prototype._init=function(){var r;return r=e.get("AuthSession"),this.user_type=null!=r?r.user_type:void 0,this.auth_id=null!=r?r.auth_id:void 0,this.auth_provider=null!=r?r.auth_provider:void 0,this.token=null!=r?r.token:void 0},r.prototype.attributes=function(){return{user_type:this.user_type,auth_id:this.auth_id,auth_provider:this.auth_provider,token:this.token}},r.prototype.set=function(r,t,o,n){return this.user_type=r,this.auth_id=t,this.auth_provider=o,this.token=n,e.put("AuthSession",this.attributes())},r.prototype.destroy=function(){return this.user_type=null,this.auth_id=null,this.auth_provider=null,this.token=null,e.remove("AuthSession")},r.prototype.as_json=function(){return JSON.stringify(this.attributes())},r.prototype.isEmpty=function(){return"{}"===this.as_json},r}(),new r}]),angular.module("admin").config(["$routeProvider","WardenProvider",function(e,r){return r.simplify(e).set_template_prefix("views/admin").when("admin.login",{omitController:!0}).when("admin.listing").when("admin.events").when("admin.users")}]),angular.module("admin").controller("AdminEventsCtrl",["$scope","$rootScope","Event",function(e,r,t){return e.events=t.all({order:"updated_at DESC"})}]),angular.module("admin").controller("AdminListingCtrl",["$scope","$rootScope","Provider",function(e,r,t){return e.providers=t.all({order:"updated_at DESC"}),e.approve=function(e){return e.status="Approved",t.approve(e.id).then(function(){return r.notify_success("approved!")},function(){return r.notify_error("Unable to approve listing")})}}]),angular.module("admin").controller("AdminUsersCtrl",["$scope","$rootScope","User",function(e,r,t){return e.users=t.all({order:"updated_at DESC"})}]),angular.module("admin").directive("adminDashboardSidebar",[function(){return{restrict:"EA",replace:!0,templateUrl:"partials/admin/admin_dashboard_sidebar.html"}}]),angular.module("admin").directive("adminLoginForm",[function(){return{restrict:"EA",replace:!0,scope:{},templateUrl:"forms/admin/login.form.html",controller:["$scope","$rootScope","$routeParams","Auth",function(e,r,t,o){var n;return e.hasError=function(r){return!r.$valid&&(r.$dirty||e.submitted)},e.login=function(){return e.submitted=!0,e.form.$valid?(r.clear_notifications(),o.authenticate("Admin",e.user.email,"local",e.user.password)):void 0},n=function(){return e.submitted=!1},n()}]}}]),angular.module("account").config(["$routeProvider","$locationProvider",function(e,r){return e.otherwise({redirectTo:"/home"}),r.html5Mode(!1)}]),angular.module("common").config(["$httpProvider",function(e){var r;return r=["$q","$injector","$rootScope",function(e,r,t){var o,n;return n=function(e){var o;return o=r.get("$http"),1>o.pendingRequests.length&&t.$broadcast("ajax_loading:stopped"),e},o=function(o){var n;return n=r.get("$http"),1>n.pendingRequests.length&&t.$broadcast("ajax_loading:stopped"),e.reject(o)},function(e){return t.$broadcast("ajax_loading:started"),e.then(n,o)}}],e.responseInterceptors.push(r)}]),angular.module("common").config(["RestangularProvider","ServiceEndpoint",function(e,r){return e.setBaseUrl(r),e.setListTypeIsArray(!0),e.setFullRequestInterceptor(function(e,r,t,o,n,i){var a,u,s,c;if(null!=(null!=e?e._deny_fields:void 0))for(c=e._deny_fields,u=0,s=c.length;s>u;u++)a=c[u],delete e[a];return{element:e,operation:r,route:t,url:o,headers:n,params:i}}),e.setResponseExtractor(function(e){return e})}]),angular.module("common").directive("header",[function(){return{restrict:"EA",replace:!0,templateUrl:"partials/common/header.html"}}]),angular.module("common").directive("serviceCategories",[function(){return{restrict:"EA",replace:!0,scope:{},templateUrl:"partials/common/service_categories.html",controller:["$scope","$rootScope","$location",function(e,r,t){return e.goTo=function(e){return t.path("/services/"+e)}}]}}]),angular.module("common").directive("sidebar",[function(){return{restrict:"EA",replace:!0,scope:{},templateUrl:"partials/common/sidebar.html",controller:["$scope","$rootScope","Service","$location",function(e,r,t,o){return e.services=t.all({order:"created_at ASC"}),e.goTo=function(e){return o.path("/services/"+e)}}]}}]),angular.module("common").directive("spinner",[function(){return{restrict:"E",replace:!0,templateUrl:"partials/common/spinner.html",controller:["$scope",function(e){return e.$on("ajax_loading:started",function(){return e.isLoading=!0}),e.$on("ajax_loading:stopped",function(){return e.isLoading=!1})}],link:function(){var e,r;return e={lines:12,length:7,width:5,radius:10,color:"#fff",speed:1,trail:66,shadow:!0,left:"78px",top:"78px"},r=document.getElementById("spin"),new Spinner(e).spin(r)}}}]),angular.module("common").directive("tagsinput",[function(){return{restrict:"A",require:"?ngModel",link:function(e,r,t,o){var n,i,a;if(o)return n=!1,i={onChange:function(){return a()}},a=function(){return o.$setViewValue(r.val())},o.$render=function(){return angular.isString(o.$viewValue)&&(r.val(o.$viewValue),r.attr("value",o.$viewValue)),n?void 0:(r.tagsInput(i),n=!0)}}}}]),angular.module("common").directive("alerter",[function(){return{restrict:"E",replace:!0,scope:{closeCountDown:"@"},controller:["$scope","$timeout",function(e,r){var t,o;return e.alerts=[],o={dir1:"down",dir2:"left",push:"top",spacing1:25,spacing2:25,firstpos1:125,firstpos2:25},t=null,e.addAlert=function(n,i){var a,u,s;return u=function(){var r,t,o,n;for(o=e.alerts,n=[],r=0,t=o.length;t>r;r++)a=o[r],n.push(a.msg);return n}(),u.indexOf(i)>=0?void 0:(e.alerts.push({type:n,msg:i}),$.pnotify({text:i,type:n,stack:o}),null!=t&&r.cancel(t),s=3e3,angular.isDefined(e.closeCountDown)&&(s=e.closeCountDown),t=r(function(){return e.clearAlerts()},s))},e.clearAlerts=function(){return e.alerts=[],$.pnotify_remove_all()},e.$on("notification:info",function(r,t){return e.addAlert("info",t)}),e.$on("notification:success",function(r,t){return e.addAlert("success",t)}),e.$on("notification:error",function(r,t){return e.addAlert("error",t)}),e.$on("notification:clear",function(){return e.clearAlerts()})}]}}]),angular.module("common").directive("fileupload",[function(){return{restrict:"A",scope:{uploaderId:"@",serverDomain:"@",servicePath:"@"},link:function(e,r,t){var o;return o={url:""+t.serverDomain+"/"+t.servicePath,dataType:"json",add:function(r,o){return e.$emit("fileupload:add",{id:t.uploaderId,domain:t.serverDomain,path:t.servicePath,data:o}),o.submit()},done:function(r,o){return e.$emit("fileupload:done",{id:t.uploaderId,domain:t.serverDomain,path:t.servicePath,data:o})},progress:function(r,o){return e.$emit("fileupload:progress",{id:t.uploaderId,domain:t.serverDomain,path:t.servicePath,data:o})},fail:function(r,o){return e.$emit("fileupload:fail",{id:t.uploaderId,domain:t.serverDomain,path:t.servicePath,data:o})}},r.fileupload(o)}}}]),angular.module("common").directive("match",function(){return{require:"ngModel",scope:{match:"="},link:function(e,r,t,o){return e.$watch(function(){var r;return r=void 0,(e.match||o.$viewValue)&&(r=e.match+"_"+o.$viewValue),r},function(r){return r?o.$parsers.unshift(function(r){var t;return t=e.match,t!==r?(o.$setValidity("match",!1),void 0):(o.$setValidity("match",!0),r)}):void 0})}}}),angular.module("common").directive("nailthumb",[function(){return{restrict:"A",scope:{method:"@",width:"@",height:"@",replaceAnimation:"@",ngSrc:"@"},link:function(e,r,t){var o;return o={method:"crop",width:"125",height:"125",replaceAnimation:"fade"},null!=t.method&&(o.method=t.method),null!=t.width&&(o.width=t.width),null!=t.height&&(o.height=t.height),null!=t.replaceAnimation&&(o.replaceAnimation=t.replaceAnimation),t.$observe("ngSrc",function(){return r.nailthumb(o)})}}}]),angular.module("common").run(["$rootScope",function(e){return e.start_ajax=function(){return e.$broadcast("ajax_loading:started")},e.stop_ajax=function(){return e.$broadcast("ajax_loading:stopped")}}]),angular.module("common").run(["$rootScope","$log",function(e,r){return e.alert=function(e){return alert(e)},e.log=function(e){return r.log(e)},e.warn=function(e){return r.warn(e)},e.error=function(e){return r.error(e)}}]),angular.module("common").run(["$rootScope",function(e){return e.notify_info=function(r,t){return null==t&&(t=!1),t||e.$broadcast("notification:clear"),e.$broadcast("notification:info",r)},e.notify_error=function(r,t){return null==t&&(t=!0),t||e.$broadcast("notification:clear"),e.$broadcast("notification:error",r)},e.notify_success=function(r,t){return null==t&&(t=!1),t||e.$broadcast("notification:clear"),e.$broadcast("notification:success",r)},e.clear_notifications=function(){return e.$broadcast("notification:clear")}}]),angular.module("common").run(["$rootScope","$location",function(e,r){return e.redirect_to=function(t,o){return null==o&&(o={}),t=t.replace(/^\//,""),null!=o.success&&e.notify_success(o.success),null!=o.info&&e.notify_info(o.info),null!=o.error&&e.notify_error(o.error),r.path("/"+t)}}]),angular.module("common").run(["$rootScope","$location",function(e,r){return e.$current_route="/",e.$on("$routeChangeSuccess",function(){return e.$current_route=r.path()})}]),angular.module("common").run(["$rootScope",function(e){return e._=_}]),angular.module("common").filter("inflector",function(){var e,r,t;return t=function(e){return e.replace(/^([a-z])|\s+([a-z])/g,function(e){return e.toUpperCase()})},e=function(e,r){return e.replace(/[A-Z]/g,function(e){return r+e})},r={humanize:function(r){return t(e(r," ").split("_").join(" "))},underscore:function(r){return r.substr(0,1).toLowerCase()+e(r.substr(1),"_").toLowerCase().split(" ").join("_")},variable:function(e){return e=e.substr(0,1).toLowerCase()+t(e.split("_").join(" ")).substr(1).split(" ").join("")}},function(e,t){return t!==!1&&angular.isString(e)?(t=t||"humanize",r[t](e)):e}});var BaseModel;BaseModel=function(){function e(e,r,t,o,n){this.Restangular=e,this.$rootScope=r,this.$filter=t,this.singularName=o,this.pluralName=n,this.humanizedSingularName=this.$filter("inflector")(this.singularName,"humanize"),this.humanizedPluralName=this.$filter("inflector")(this.pluralName,"humanize")}return e.prototype.before_operation=function(){return this.$rootScope.$broadcast("ajax_loading:started")},e.prototype.operation_success=function(){return this.$rootScope.$broadcast("ajax_loading:stopped")},e.prototype.operation_failed=function(){return this.$rootScope.$broadcast("ajax_loading:stopped")},e.prototype.create=function(e,r){var t,o,n=this;return null==r&&(r={}),this.before_operation({model:e,options:r}),o=this.Restangular.all(this.pluralName).post(e),null!=r.delegate&&r.delegate?o:(t={notify_success:!0,notify_error:!0},null!=r.notify_success&&(t.notify_success=r.notify_success),null!=r.notify_error&&(t.notify_error=r.notify_error),o.then(function(e){return n.operation_success({item:e}),t.notify_success&&n.$rootScope.notify_success(""+n.humanizedSingularName+" created successfully"),e},function(o){return n.operation_failed({response:o,model:e,options:r}),t.notify_error&&n.$rootScope.notify_error("Failed to create "+n.humanizedSingularName),console.log("@create error: "),console.log(o)}))},e.prototype.count=function(e){var r,t,o=this;return null==e&&(e={}),this.before_operation({options:e}),t={},null!=e.conditions&&(t.conditions=JSON.stringify(e.conditions)),null!=e.any_in&&(t.any_in=JSON.stringify(e.any_in)),null!=e.search&&(t.search=e.search),r=this.Restangular.all(this.pluralName).customGET("count",t),null!=e.delegate&&e.delegate?r:r.then(function(e){return o.operation_success({count:e}),e},function(r){return o.operation_failed({response:r,options:e}),console.log("@count error:"),console.log(r)})},e.prototype.all=function(e){var r,t,o=this;return null==e&&(e={}),this.before_operation({options:e}),t={limit:1e3,offset:0,order:"updated_at DESC",page:1,per_page:100},null!=e.limit&&(t.limit=e.limit),null!=e.offset&&(t.offset=e.offset),null!=e.order&&(t.order=e.order),null!=e.page&&(t.page=e.page),null!=e.per_page&&(t.per_page=e.per_page),null!=e.includes&&(t.includes=JSON.stringify(e.includes)),null!=e.conditions&&(t.conditions=JSON.stringify(e.conditions)),null!=e.any_in&&(t.any_in=JSON.stringify(e.any_in)),null!=e.search&&(t.search=e.search),r=this.Restangular.all(this.pluralName).getList(t),null!=e.delegate&&e.delegate?r:r.then(function(e){return o.operation_success({list:e}),e},function(r){return o.operation_failed({response:r,options:e}),console.log("@all error:"),console.log(r)})},e.prototype.find=function(e,r){var t,o,n=this;return null==r&&(r={}),this.before_operation({id:e,options:r}),o={},null!=r.includes&&(o.includes=JSON.stringify(r.includes)),t=this.Restangular.one(this.pluralName,e).get(o),null!=r.delegate&&r.delegate?t:t.then(function(e){return n.operation_success({item:e}),e},function(e){return n.operation_failed({response:e}),n.$rootScope.notify_error("Unable to find "+n.humanizedSingularName),console.log("@find error"),console.log(e)})},e.prototype.destroy=function(e,r){var t,o=this;return null==r&&(r={}),this.before_operation({id:e,options:r}),console.log(e),console.log(this.Restangular.one(this.pluralName,e).remove),t=this.Restangular.one(this.pluralName,e).remove(),null!=r.delegate&&r.delegate?t:t.then(function(e){return o.operation_success({item:e})},function(e){return o.operation_failed({response:e}),o.$rootScope.notify_error("Unable to delete "+o.humanizedSingularName),console.log("@destroy error"),console.log(e)})},e}(),angular.module("common").provider("Warden",function(){var e;return e=function(){function e(){}return e.prototype.$get=function(){},e.prototype.simplify=function(e){return this.routeProvider=e,this.requireUser=!1,this.omitView=!1,this.omitController=!1,this},e.prototype.set_template_prefix=function(e){return this.templatePrefix=e,"/"!==e.slice(-1)&&(this.templatePrefix+="/"),this},e.prototype.require_user=function(){return this.requireUser=!0,this},e.prototype.omit_view=function(){return this.omitView=!0,this},e.prototype.omit_controller=function(){return this.omitController=!0,this},e.prototype.when=function(e,r){var t,o,n,i,a,u,s,c,l,d,f;if(null==r&&(r={}),"/"===e.slice(0,1)&&(e=e.slice(1)),t=e.split("/")[0],n=function(){var e,r,o,n;for(o=t.split(/\.|_/),n=[],e=0,r=o.length;r>e;e++)c=o[e],n.push(c.capitalize());return n}(),u=r.route||"/"+e,o=""+n.join("")+"Ctrl",s=""+this.templatePrefix+t+".html",a={},null==r.user&&(r.user=this.requireUser),null==r.omitView&&(r.omitView=this.omitView),null==r.omitController&&(r.omitController=this.omitController),r.user&&(a.current_user=resolvables.current_user),null!=r.resolves)for(f=r.resolves,l=0,d=f.length;d>l;l++)i=f[l],a[i]=resolvables[i];return r.omitView&&(s="views/pages/empty.html"),null!=r.templateUrl&&(s=r.templateUrl),r.omitController?this.routeProvider.when(u,{templateUrl:s,resolve:a}):this.routeProvider.when(u,{templateUrl:s,controller:o,resolve:a}),this},e}(),new e}),angular.module("common").service("ErrorProcessor",["$rootScope","$log",function(e,r){return this.process_save=function(t,o){var n,i,a,u,s;switch(t.status){case 422:u=t.data,s=[];for(a in u)i=u[a],s.push(function(){var t,o,u;for(u=[],t=0,o=i.length;o>t;t++)n=i[t],r.error(n),u.push(e.notify_error(""+a+" "+n));return u}());return s;default:return null!=o?o():e.notify_error("Unable to complete your request. Please contact the administrator.")}},this.process_login=function(r,t){switch(r.status){case 401:if("message"in r.data)return e.notify_error(r.data.message);break;default:return null!=t?t():e.notify_error("Sorry, we are unable to log you in. Please contact the administrator.")}},this.process_registration=function(r,t){switch(r.status){case 401:if("message"in r.data)return e.notify_error(r.data.message);break;default:return null!=t?t():e.notify_error("Sorry, we are unable to proceed with registration. Please contact the administrator.")}},this.process_forgot_password=function(r,t){switch(r.status){case 401:if("message"in r.data)return e.notify_error(r.data.message);
break;default:return null!=t?t():e.notify_error("Sorry, we are unable to reset your password. Please contact the administrator")}},this}]),angular.module("common").service("FormHandler",["$rootScope",function(e){return this.formify=function(e){return e.submitted=!1,e.form_object={},e.hasError=function(r){return!r.$valid&&(r.$dirty||e.submitted)},e.removeAssoc=function(e,r){return null!=e[r].id?e[r]._destroy=!0:e.splice(r,1)}},this.validate=function(r){var t;return window.scrollTo(0),t=0,angular.forEach(r,function(r,o){return angular.forEach(r,function(r){var n;if(t+=1,4>t)switch(o){case"required":if(r.$error.required===!0){if(null!=r.$name)return e.notify_error(""+(null!=(n=r.$name)?n.humanize():void 0)+" is missing.")}else if(angular.isArray(r.$error.required)&&null!=r.$error.required[0].$name)return e.notify_error(""+r.$error.required[0].$name.humanize()+" is missing");break;case"email":if(r.$error.email===!0){if(null!=r.$viewValue)return e.notify_error(""+r.$viewValue+" is not a valid email.")}else if(angular.isArray(r.$error.email)&&null!=r.$error.email[0].$viewValue)return e.notify_error(""+r.$error.email[0].$viewValue+" is not a valid email.");break;case"url":if(r.$error.url===!0){if(null!=r.$viewValue)return e.notify_error(""+r.$viewValue+" is not a valid url.")}else if(angular.isArray(r.$error.url)&&null!=r.$error.url[0].$viewValue)return e.notify_error(""+r.$error.url[0].$viewValue+" is not a valid url.")}})})},this.handleImage=function(r,t,o,n,i){return null==n&&(n="Uploading.."),null==i&&(i="Failed to upload picture."),r.$on("fileupload:add",function(e,o){return r.$apply(function(){switch(o.id){case t:return r[""+t+"_state"]=n}})}),r.$on("fileupload:done",function(e,n){return r.$apply(function(){var e,i,a,u,s,c,l,d,f,p,m,_;if(a=null!=(u=n.data.result)?null!=(s=u.data)?null!=(c=s.content)?c.url:void 0:void 0:void 0,e=null!=(l=n.data.result)?null!=(d=l.data)?null!=(f=d.avatar)?f.url:void 0:void 0:void 0,i=null!=(p=n.data.result)?null!=(m=p.data)?null!=(_=m.thumb)?_.url:void 0:void 0:void 0,null!=a)switch(n.id){case t:return r[""+t+"_state"]="",o.push({url:n.domain+a,avatar_url:n.domain+e,thumb_url:n.domain+i})}})}),r.$on("fileupload:failed",function(){return e.notify_error(i,!1)})},this}]),angular.module("common").service("MemoryStore",[function(){var e;return e={},this.set=function(r,t){return e[r]=t},this.get=function(r){return e[r]},this.del=function(r){return delete e[r]},this.inspect=function(){return e},this.clear=function(){return e={}},this}]),angular.module("config").constant("SiteName","DrawingBoard"),angular.module("config").constant("ServiceEndpoint","http://162.243.15.77:3000"),angular.module("dashboard").controller("DashboardMemberCartCtrl",["$scope","Cart",function(e,r){return e.cart=r.get(),e.remove=function(e,t){return r.remove(e,t)},e.lengthOfHash=function(e){return Object.keys(e).length-1}}]),angular.module("dashboard").controller("DashboardMemberCheckoutCtrl",["$scope","Cart","$routeParams","FormHandler","Event",function(e,r,t,o,n){var i;return e.remove=function(e,t){return r.remove(e,t)},e.lengthOfHash=function(e){return Object.keys(e).length-1},e.saveForm=function(){var r,t;return e.submitted=!0,e.terms_and_conditions?e.form.$valid?(e.clear_notifications(),r=n.save_form(e.form_object),t="Your event details are updated successfully",r.then(function(){return e.redirect_to("dashboard.member.events",{success:t})},function(){return e.notify_error("Form has missing or invalid values")})):o.validate(e.form.$error):e.notify_info("Please check that you have read the terms and conditions")},e.submitForm=function(){var r,t;return e.submitted=!0,e.terms_and_conditions?e.form.$valid?(e.clear_notifications(),r=n.submit_form(e.form_object),t="Your request has been submitted.",r.then(function(){return e.redirect_to("dashboard.member.events",{success:t})},function(){return e.notify_error("Form has missing or invalid values")})):o.validate(e.form.$error):e.notify_info("Please check that you have read the terms and conditions")},i=function(){return o.formify(e),t.event_id?n.find(t.event_id).then(function(t){return e.form_object=t,e.form_object.cart=r.get(),e.form_object.contact_email=e.current_user.email,angular.isUndefined(e.form_object.questions)?e.form_object.questions={}:void 0}):(e.form_object={member_id:e.current_user.id,cart:r.get(),contact_email:e.current_user.email},angular.isUndefined(e.form_object.questions)?e.form_object.questions={}:void 0)},i()}]),angular.module("dashboard").controller("DashboardMemberProfileCtrl",["$scope","$rootScope","FormHandler",function(e,r,t){var o;return e.hasError=function(r){return!r.$valid&&(r.$dirty||e.submitted)},e.submitForm=function(){return e.submitted=!0,e.form.$valid?(e.clear_notifications(),r.current_user.put().then(function(t){return r.current_user=t,e.notify_success("Your profile is updated successfully")},function(){return window.scrollTo(0),e.notify_error("Form has missing or invalid values")})):t.validate(e.form.$error)},o=function(){return e.submitted=!1},o()}]),angular.module("dashboard").controller("DashboardVendorProfileCtrl",["$scope","$rootScope","FormHandler",function(e,r,t){var o;return e.hasError=function(r){return!r.$valid&&(r.$dirty||e.submitted)},e.submitForm=function(){return e.submitted=!0,e.form.$valid?(e.clear_notifications(),r.current_user.put().then(function(t){return r.current_user=t,e.notify_success("Your profile is updated successfully")},function(){return window.scrollTo(0),e.notify_error("Form has missing or invalid values")})):t.validate(e.form.$error)},o=function(){return e.submitted=!1},o()}]),angular.module("dashboard").config(["$routeProvider","WardenProvider",function(e,r){return r.simplify(e).set_template_prefix("views/dashboard").require_user().when("dashboard.vendor.listing",{omitController:!0}).when("dashboard.vendor.profile").when("dashboard.member.events",{omitController:!0}).when("dashboard.member.cart",{user:!1}).when("dashboard.member.checkout/:event_id").when("dashboard.member.profile").when("listing.new",{omitController:!0}).when("listing.edit/:id",{omitController:!0}).when("event.new",{omitController:!0}).when("event.edit/:id",{omitController:!0})}]),angular.module("dashboard").directive("eventForm",[function(){return{restrict:"EA",replace:!0,scope:{type:"@",user:"="},templateUrl:"forms/dashboard/event.form.html",controller:["$scope","$rootScope","$routeParams","FormHandler","Event","$cookieStore",function(e,r,t,o,n,i){var a;return e.submitForm=function(){var t,a;if(e.submitted=!0,!e.form.$valid)return o.validate(e.form.$error);switch(r.clear_notifications(),e.type){case"new":return t=n.create(e.form_object,{notify_success:!1}),a="Event has been submitted",t.then(function(){return r.redirect_to("dashboard.member.events",{success:a})},function(){return r.notify_error("Form has missing or invalid values")});case"edit":return t=e.form_object.put(),a="Your event is updated successfully",t.then(function(){return r.redirect_to("dashboard.member.events",{success:a})},function(){return r.notify_error("Form has missing or invalid values")});case"to_cache":return i.put("event_form",e.form_object),r.redirect_to("service_categories",{success:"You can request quotes from vendors for this event."})}},a=function(){switch(o.formify(e),e.type){case"new":return e.form_object=i.get("event_form")||{},e.form_object.member_id=e.user.id,i.remove("event_form");case"edit":return n.find(t.id).then(function(r){return e.form_object=r});case"to_cache":return e.form_object={}}},a()}]}}]),angular.module("dashboard").directive("listingForm",[function(){return{restrict:"EA",replace:!0,scope:{type:"@",user:"="},templateUrl:"forms/dashboard/listing.form.html",controller:["$scope","$rootScope","$routeParams","FormHandler","Provider","Service",function(e,r,t,o,n,i){var a;return e.submitForm=function(){var t,i;if(e.submitted=!0,e.terms_and_conditions){if(e.form.$valid){switch(r.clear_notifications(),e.form_object.service_ids=[],angular.forEach(e.form_object.checked_services,function(r,t){return r?e.form_object.service_ids.push(t):void 0}),delete e.form_object.services,e.type){case"new":t=n.create(e.form_object,{notify_success:!1}),i="Listing has been submitted";break;case"edit":t=e.form_object.put(),i="Your listing is updated successfully"}return t.then(function(){return r.redirect_to("dashboard.vendor.listing",{success:i})},function(){return r.notify_error("Form has missing or invalid values")})}return o.validate(e.form.$error)}return r.notify_info("Please check that you have read the terms and conditions")},a=function(){switch(o.formify(e),e.services=i.all(),e.type){case"new":e.form_object={vendor_id:e.user.id,provider_pictures:[],checked_services:{}},o.handleImage(e,"provider_picture",e.form_object.provider_pictures);break;case"edit":n.find(t.id).then(function(r){return e.form_object=r,e.form_object.checked_services={},angular.forEach(r.services,function(r){return e.form_object.checked_services[r.id]=!0}),o.handleImage(e,"provider_picture",e.form_object.provider_pictures)})}return e.mapOptions={center:new google.maps.LatLng(1.3667,103.8),zoom:12,mapTypeId:google.maps.MapTypeId.ROADMAP,streetViewControl:!1,overviewMapControl:!1,panControl:!1,mapTypeControl:!1},e.setLocationMarker=function(r,t){return e.form_object.map_lat=t[0].latLng.lat(),e.form_object.map_lng=t[0].latLng.lng(),angular.isUndefined(e.locationMarker)?e.locationMarker=new google.maps.Marker({map:e.locationMap,position:t[0].latLng}):e.locationMarker.setPosition(t[0].latLng)}},a()}]}}]),angular.module("pages").controller("ContactCtrl",["$scope","Mailer",function(e,r){return e.submitForm=function(){return console.log(e.contact),r.contact_us(e.contact).then(function(){return e.notify_success("Thank you for contacting us. We will get back to you shortly")})}}]),angular.module("pages").controller("HomeCtrl",["$scope",function(){return console.log("noop")}]),angular.module("pages").config(["$routeProvider","WardenProvider",function(e,r){return r.simplify(e).set_template_prefix("views/pages").when("home").when("about",{omitController:!0}).when("contact")}]),angular.module("pages").factory("Mailer",["Restangular","$rootScope",function(e){var r;return r=function(){function r(){}return r.prototype.contact_us=function(r){return e.all("mailer").customPOST("contact_us",{form_values:r})},r}(),new r}]),angular.module("platform").controller("ProviderCtrl",["$scope","provider","service","$modal","Cart","Review",function(e,r,t,o,n,i){var a,u,s;for(e.provider=r,e.service=t,e.reviewFormOpened=!1,e.provider_pictures_pairs=[],u=0;e.provider.provider_pictures.length>u;)a=e.provider.provider_pictures[u],s=e.provider.provider_pictures[u+1],e.provider_pictures_pairs.push([a,s]),u+=2;return e.reviews_query={order:"created_at DESC",page:1,per_page:2,conditions:{provider_id:r.id}},e.populateReviews=function(){return e.all_reviews_count=i.count(),i.count(e.reviews_query).then(function(r){return e.total_review_results=r,e.total_review_pages=Math.ceil(r/e.reviews_query.per_page)},function(){return e.notify_error("Unable to fetch count from server")}),i.all(e.reviews_query).then(function(r){return e.reviews=r},function(){return e.notify_error("Unable to fetch result from server")})},e.$on("repull_reviews",function(){return e.populateReviews()}),e.$watch("reviews_query",function(r,t,o){return r.page===t.page&&(o.reviews_query.page=1),e.populateReviews()},!0),e.openPictureDialog=function(e){return o.open({templateUrl:"dialogs/provider_picture.dialog.html",windowClass:"modal-img modal",controller:["$scope","$modalInstance",function(r,t){return r.picture_url=e,r.close=function(){return t.close()}}]})},e.openQuoteDialog=function(){return"vendor"!==e.user_type?o.open({templateUrl:"dialogs/choose_services.dialog.html",windowClass:"modal",controller:["$scope","$modalInstance",function(e,t){return e.services=r.services,e.selected_services={},e.cancel=function(){return t.close()},e.confirm=function(){return angular.forEach(e.selected_services,function(t,o){return t&&n.add(o,r),e.notify_success("Service(s) have been added to your cart")}),t.close()}}]}):e.notify_info("Vendor cannot request quotes from other vendors.")}}]),angular.module("platform").controller("ServicesCtrl",["$scope","service","$modal","Cart","$location","Provider",function(e,r,t,o,n,i){var a;return e.service=r,e.goToDetailsPage=function(e){return n.path("provider/"+e+"/"+r.name)},e.services_sort_by=function(r){return e.query.order=r},e.refreshList=function(){return i.count(e.query).then(function(r){return e.total_results=r,e.total_pages=Math.ceil(r/e.query.per_page)},function(){return e.notify_error("Unable to fetch count from server")}),i.all(e.query).then(function(r){return e.providers=r},function(){return e.notify_error("Unable to fetch result from server")})},a=function(){return e.query={order:"created_at DESC",page:1,per_page:5,any_in:{service_ids:[r.id]},conditions:{status:"Approved"}},e.$watch("query",function(r,t,o){return r.page===t.page&&(o.query.page=1),e.refreshList()},!0),e.refreshList()},a()}]),angular.module("fork").constant("customRatingConfig",{max:5,stateOn:null,stateOff:null}),angular.module("fork").controller("CustomRatingController",["$scope","$attrs","$parse","customRatingConfig",function(e,r,t,o){return this.maxRange=angular.isDefined(r.max)?e.$parent.$eval(r.max):o.max,this.stateOn=angular.isDefined(r.stateOn)?e.$parent.$eval(r.stateOn):o.stateOn,this.stateOff=angular.isDefined(r.stateOff)?e.$parent.$eval(r.stateOff):o.stateOff,this.createRateObjects=function(e){var r,t,o;for(r={stateOn:this.stateOn,stateOff:this.stateOff},t=0,o=e.length;o>t;)e[t]=angular.extend({index:t},r,e[t]),t++;return e},e.range=angular.isDefined(r.ratingStates)?this.createRateObjects(angular.copy(e.$parent.$eval(r.ratingStates))):this.createRateObjects(Array(this.maxRange)),e.rate=function(r){return e.readonly||e.value===r?void 0:e.value=r},e.enter=function(r){return e.readonly||(e.val=r),e.onHover({value:r})},e.reset=function(){return e.val=angular.copy(e.value),e.onLeave()},e.$watch("value",function(r){return e.val=r}),e.readonly=!1,r.readonly?e.$parent.$watch(t(r.readonly),function(r){return e.readonly=!!r}):void 0}]),angular.module("fork").directive("customRating",function(){return{restrict:"EA",scope:{value:"=",onHover:"&",onLeave:"&"},controller:"CustomRatingController",templateUrl:"template/custom_rating/custom_rating.html",replace:!0}}),angular.module("platform").directive("searchMenu",[function(){return{restrict:"E",templateUrl:"partials/platform/search.menu.html",scope:{name:"@",options:"@"},controller:["$scope","$parse","$attrs",function(e,r,t){var o,n,i,a,u,s,c;if(a=t.name,u=t.options,o=/^\s*(.*?)(?:\s+as\s+(.*?))?(?:\s+group\s+by\s+(.*))?\s+for\s+(?:([\$\w][\$\w\d]*)|(?:\(\s*([\$\w][\$\w\d]*)\s*,\s*([\$\w][\$\w\d]*)\s*\)))\s+in\s+(.*)$/,!(i=u.match(o)))throw Error("Expected options in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '"+u+"'.");return e.displayFn=r(i[2]||i[1]),s=i[4]||i[6],e.valueFn=r(i[2]?i[1]:s),c=r(i[7]),e.list=function(){var r,t,o,i;for(o=c(e.$parent),i=[],r=0,t=o.length;t>r;r++)n=o[r],i.push({item:n});return i}(),console.log(a),e.select=function(r){return e.$emit("search:menu",{name:a,selected:r})}}]}}]),angular.module("platform").directive("searchInput",["$timeout",function(e){return{restrict:"A",controller:["$scope","$element",function(e,r){return e.$on("search:trigger",function(){return e.search()}),e.search=function(){return e.$emit("search:input",r.val())}}],link:function(r,t){var o;return o=null,t.keyup(function(){return e.cancel(o),o=e(function(){return r.search()},500)})}}}]),angular.module("platform").directive("searchButton",[function(){return{restrict:"A",link:function(e,r){return r.click(function(){return e.$emit("search:trigger")})}}}]),angular.module("dashboard").directive("reviewForm",[function(){return{restrict:"EA",replace:!0,scope:{type:"@",reviewer:"=",provider:"=",reviewFormOpened:"="},templateUrl:"forms/platform/review.form.html",controller:["$scope","$rootScope","$routeParams","FormHandler","Review",function(e,r,t,o,n){var i;return e.submitReview=function(){var t,i;if(e.submitted=!0,e.form.$valid){switch(r.clear_notifications(),e.type){case"new":t=n.create(e.form_object,{notify_success:!1}),i="Review has been submitted";break;case"edit":t=e.form_object.put(),i="Your event is updated successfully"}return t.then(function(){return r.notify_success(i),e.closeForm(),e.$emit("repull_reviews")},function(){return r.notify_error("Form has missing or invalid values")})}return o.validate(e.form.$error)},e.closeForm=function(){return e.reviewFormOpened=!1,e.form_object={reviewer_id:e.reviewer.id,provider_id:e.provider.id,rating:0,content:"",title:""}},i=function(){switch(o.formify(e),e.type){case"new":return e.form_object={reviewer_id:e.reviewer.id,provider_id:e.provider.id,rating:0,content:"",title:""};case"edit":return n.find(t.id).then(function(r){return e.form_object=r})}},i()}]}}]);var __hasProp={}.hasOwnProperty,__extends=function(e,r){function t(){this.constructor=e}for(var o in r)__hasProp.call(r,o)&&(e[o]=r[o]);return t.prototype=r.prototype,e.prototype=new t,e.__super__=r.prototype,e};angular.module("platform").factory("Event",["Restangular","$rootScope","$filter",function(e,r,t){var o,n;return o=function(r){function t(){return n=t.__super__.constructor.apply(this,arguments)}return __extends(t,r),t.prototype.save_form=function(r){return this.before_operation(r),e.all("events").customPOST("save_form",{},{},r)},t.prototype.submit_event_form_and_register=function(r){return this.before_operation(r),e.all("events").customPOST("submit_event_form_and_register",{},{},r)},t.prototype.submit_form=function(r){return this.before_operation(r),e.all("events").customPOST("submit_form",{},{},r)},t}(BaseModel),new o(e,r,t,"event","events")}]);var __hasProp={}.hasOwnProperty,__extends=function(e,r){function t(){this.constructor=e}for(var o in r)__hasProp.call(r,o)&&(e[o]=r[o]);return t.prototype=r.prototype,e.prototype=new t,e.__super__=r.prototype,e};angular.module("platform").factory("Provider",["Restangular","$rootScope","$filter",function(e,r,t){var o,n;return o=function(r){function t(){return n=t.__super__.constructor.apply(this,arguments)}return __extends(t,r),t.prototype.approve=function(r){return e.one("providers",r).customPUT("approve",{},{})},t}(BaseModel),new o(e,r,t,"provider","providers")}]);var __hasProp={}.hasOwnProperty,__extends=function(e,r){function t(){this.constructor=e}for(var o in r)__hasProp.call(r,o)&&(e[o]=r[o]);return t.prototype=r.prototype,e.prototype=new t,e.__super__=r.prototype,e};angular.module("platform").factory("Review",["Restangular","$rootScope","$filter",function(e,r,t){var o,n;return o=function(e){function r(){return n=r.__super__.constructor.apply(this,arguments)}return __extends(r,e),r}(BaseModel),new o(e,r,t,"review","reviews")}]);var __hasProp={}.hasOwnProperty,__extends=function(e,r){function t(){this.constructor=e}for(var o in r)__hasProp.call(r,o)&&(e[o]=r[o]);return t.prototype=r.prototype,e.prototype=new t,e.__super__=r.prototype,e};angular.module("platform").factory("Service",["Restangular","$rootScope","$filter",function(e,r,t){var o,n;return o=function(r){function t(){return n=t.__super__.constructor.apply(this,arguments)}return __extends(t,r),t.prototype.get_from_name=function(r){return e.all("services").customGET("get_from_name",{name:r})},t}(BaseModel),new o(e,r,t,"service","services")}]),angular.module("platform").config(["$routeProvider","WardenProvider",function(e,r){return r.simplify(e).set_template_prefix("views/platform").when("service_categories",{omitController:!0}).when("services/:service_name",{resolves:["service"]}).when("provider/:id",{resolves:["provider","service"]}).when("provider/:id/:service_name",{resolves:["provider","service"]})}]),resolvables.provider=["Provider","$route",function(e,r){var t;return t=r.current.params.id,e.find(t)}],resolvables.service=["Service","$route",function(e,r){var t;return t=r.current.params.service_name,t?e.get_from_name(t):null}],resolvables.services=["Service",function(e){return e.all()}],angular.module("platform").factory("Cart",["$cookieStore",function(e){var r;return r=function(){function r(){this._init()}return r.prototype._init=function(){return this.cart=e.get("CartSession"),angular.isUndefined(this.cart)?this.cart={}:void 0},r.prototype.get=function(){return this.cart},r.prototype.add=function(r,t){return angular.isUndefined(this.cart[r])&&(this.cart[r]={}),this.cart[r][t.id]=t.name,e.put("CartSession",this.get())},r.prototype.remove=function(r,t){return delete this.cart[r][t],1===Object.keys(this.cart[r]).length&&delete this.cart[r],e.put("CartSession",this.get())},r.prototype.destroy=function(){return this.cart={},e.remove("CartSession")},r.prototype.as_json=function(){return JSON.stringify(this.get())},r.prototype.isEmpty=function(){return"{}"===this.as_json},r}(),new r}]);